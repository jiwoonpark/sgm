<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.spring.main.dao.PlaceInterface">
	
	<!-- 게시물 전채 개수 -->
	<select id="a_allCount" resultType="Integer">
		SELECT COUNT(*) FROM area
	</select>
	 <!-- 검색 후 게시물 전채 개수 -->
   <select id="a_searhCount" resultType="Integer" >
      SELECT COUNT(*) FROM area WHERE ${param2} like '%'||#{param1}||'%'
   </select>
	<!-- 리스트 불러오기 -->
   <select id="a_listCall" resultType="com.spring.main.dto.PlaceDto">
      SELECT totalIdx, a_idx,  u_idx,  a_name, a_area,  a_address,  a_ground,  a_content,  
      		 a_date, a_reple,  a_vcount,  a_total,  a_evalunum, a_oldPicture, a_newPicture, 
      		 a_lat,  a_lng 
			 FROM (
				SELECT 
				totalIdx, a_idx,  u_idx,  a_name, 
			 	a_area,  a_address,  a_ground,  
			 	a_content,  a_date, a_reple,  
			 	a_vcount,  a_total,  a_evalunum, a_oldPicture, a_newPicture, 
			 	a_lat,  a_lng, 
			 	ROW_NUMBER() OVER(ORDER BY a_idx DESC) AS rnum FROM area)
			 	WHERE rnum BETWEEN #{param1} AND #{param2}
   </select>
	
	
	<!-- 리스트 추가 -->
	<select id="a_searhCall" resultType="com.spring.main.dto.PlaceDto">
		SELECT totalIdx, a_idx,  u_idx,  a_name, a_area,  a_address,  a_ground,  a_content,  
		       a_date, a_reple,  a_vcount,  a_total,  a_evalunum, a_oldPicture, a_newPicture, 
		       a_lat,  a_lng 
			 FROM (
				SELECT 
				totalIdx, a_idx,  u_idx,  a_name, 
			 	a_area,  a_address,  a_ground,  
			 	a_content,  a_date, a_reple,  
			 	a_vcount,  a_total,  a_evalunum, a_oldPicture, a_newPicture, 
			 	a_lat,  a_lng, 
			 	ROW_NUMBER() OVER(ORDER BY a_idx DESC) AS rnum FROM area)
			  WHERE ${param4} like '%'||#{param3}||'%' )WHERE rnum BETWEEN #{param1} AND #{param2}
	</select>
	
	<!--  매칭 리스트 추가 --> 
  <insert id="a_write">
  INSERT INTO matching(
  	totalIdx, a_idx, t_idx, a_title, a_name, a_date, 
  	a_time, a_type, a_age, a_content, a_lat, a_lng, 
  	a_area, a_ground, a_state
  	) VALUES(
  	total_seq.NEXTVAL, area_seq.NEXTVAL, #{param1}, #{param2}, #{param3}, #{param4}, 
  	#{param5}, #{param6}, #{param7}, #{param8}, #{param9}, #{param10}, 
  	#{param11}, #{param12}, #{param13})
  </insert> 
	
	
	
	
	
	
</mapper>